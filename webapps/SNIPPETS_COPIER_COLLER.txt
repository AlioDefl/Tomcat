â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SNIPPETS Ã€ COPIER-COLLER - CONTRÃ”LE TP WEB BACKEND
  Par Aliocha Deflou - BUT2 Info
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. DÃ‰BUT HTML (copier au dÃ©but de doGet/doPost)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

res.setContentType("text/html;charset=UTF-8");
PrintWriter out = res.getWriter();
out.println("<!DOCTYPE html><html><head><meta charset='UTF-8'>");
out.println("<title>Mon Titre</title><link rel='stylesheet' href='style-tp.css'>");
out.println("</head><body><div class='container'><h1>Mon Titre</h1>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. FIN HTML (copier Ã  la fin de doGet/doPost)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("</div></body></html>");



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. SELECT SIMPLE (afficher un tableau)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "SELECT nom, prenom, age FROM client ORDER BY nom";
    System.out.println("=== SQL: " + sql); // DEBUG (demandÃ© par le prof !)
    
    try (Statement stmt = cnx.createStatement();
         ResultSet rs = stmt.executeQuery(sql)) {
        
        out.println("<table><thead><tr><th>Nom</th><th>PrÃ©nom</th><th>Age</th></tr></thead><tbody>");
        while (rs.next()) {
            out.println("<tr><td>" + rs.getString("nom") + "</td>");
            out.println("<td>" + rs.getString("prenom") + "</td>");
            out.println("<td>" + rs.getInt("age") + "</td></tr>");
        }
        out.println("</tbody></table>");
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
    e.printStackTrace(); // Pour les logs
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. SELECT AVEC PARAMÃˆTRE (PreparedStatement)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String recherche = req.getParameter("nom");
try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "SELECT * FROM client WHERE nom = ?";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setString(1, recherche);
        
        // DEBUG : Afficher la requÃªte (demandÃ© par le prof !)
        System.out.println("=== SQL: " + sql);
        System.out.println("=== Param 1: " + recherche);
        
        try (ResultSet rs = pstmt.executeQuery()) {
            if (rs.next()) {
                out.println("<p>TrouvÃ© : " + rs.getString("nom") + "</p>");
            } else {
                out.println("<p>Aucun rÃ©sultat</p>");
            }
        }
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
    e.printStackTrace();
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. INSERT                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String nom = req.getParameter("nom");
String prenom = req.getParameter("prenom");
int age = Integer.parseInt(req.getParameter("age"));

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "INSERT INTO client (nom, prenom, age) VALUES (?, ?, ?)";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setString(1, nom);
        pstmt.setString(2, prenom);
        pstmt.setInt(3, age);
        
        // DEBUG (demandÃ© par le prof !)
        System.out.println("=== SQL: " + sql);
        System.out.println("=== Params: " + nom + ", " + prenom + ", " + age);
        
        int rows = pstmt.executeUpdate();
        if (rows > 0) {
            out.println("<div class='success'><p>Client ajoutÃ© !</p></div>");
        }
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
    e.printStackTrace();
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. UPDATE                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String nom = req.getParameter("nom");
int nouvelAge = Integer.parseInt(req.getParameter("age"));

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "UPDATE client SET age = ? WHERE nom = ?";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setInt(1, nouvelAge);
        pstmt.setString(2, nom);
        
        System.out.println("=== SQL: " + sql); // DEBUG
        System.out.println("=== Params: " + nouvelAge + ", " + nom);
        
        int rows = pstmt.executeUpdate();
        out.println("<p>" + rows + " ligne(s) modifiÃ©e(s)</p>");
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
    e.printStackTrace();
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. DELETE                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String nom = req.getParameter("nom");
try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "DELETE FROM client WHERE nom = ?";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setString(1, nom);
        
        System.out.println("=== SQL: " + sql); // DEBUG
        System.out.println("=== Param: " + nom);
        
        int rows = pstmt.executeUpdate();
        if (rows > 0) {
            out.println("<div class='success'><p>SupprimÃ© !</p></div>");
        }
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
    e.printStackTrace();
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. FORMULAIRE                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<form method='POST' action='servlet-MaServlet'>");
out.println("  <label for='nom'>Nom :</label>");
out.println("  <input type='text' id='nom' name='nom' required>");
out.println("  <label for='prenom'>PrÃ©nom :</label>");
out.println("  <input type='text' id='prenom' name='prenom' required>");
out.println("  <label for='age'>Age :</label>");
out.println("  <input type='number' id='age' name='age' required>");
out.println("  <input type='submit' value='Envoyer'>");
out.println("</form>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. TABLEAU AVEC ACTIONS                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<table><thead><tr><th>Nom</th><th>Actions</th></tr></thead><tbody>");
while (rs.next()) {
    int id = rs.getInt("id");
    String nom = rs.getString("nom");
    out.println("<tr><td>" + nom + "</td><td>");
    out.println("<a href='servlet-Voir?id=" + id + "'>Voir</a> | ");
    out.println("<a href='servlet-Modifier?id=" + id + "'>Modifier</a>");
    out.println("</td></tr>");
}
out.println("</tbody></table>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. BOUTON SUPPRIMER AVEC CONFIRMATION                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<form method='POST' action='servlet-Supprimer' class='inline-form'>");
out.println("  <input type='hidden' name='id' value='" + id + "'>");
out.println("  <button type='submit' class='btn-supprimer' onclick='return confirm(\"Supprimer ?\")'>Supprimer</button>");
out.println("</form>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. VÃ‰RIFIER SESSION (dÃ©but de doGet)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

HttpSession session = req.getSession(false);
if (session == null || session.getAttribute("userLogin") == null) {
    res.sendRedirect("login.html");
    return;
}
String login = (String) session.getAttribute("userLogin");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 12. LOGIN (authentification)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String login = req.getParameter("login");
String mdp = req.getParameter("mdp");

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "SELECT role FROM personne WHERE login = ? AND mdp = MD5(?)";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setString(1, login);
        pstmt.setString(2, mdp);
        try (ResultSet rs = pstmt.executeQuery()) {
            if (rs.next()) {
                HttpSession session = req.getSession();
                session.setAttribute("userLogin", login);
                session.setAttribute("userRole", rs.getString("role"));
                res.sendRedirect("servlet-Menu");
            } else {
                res.sendRedirect("login.html");
            }
        }
    }
} catch (SQLException e) {
    res.sendRedirect("login.html");
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 13. LOGOUT (dÃ©connexion)                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

HttpSession session = req.getSession(false);
if (session != null) {
    session.invalidate();
}
res.sendRedirect("login.html");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 14. RÃ‰CUPÃ‰RER PARAMÃˆTRES AVEC SÃ‰CURITÃ‰                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// String avec dÃ©faut
String nom = req.getParameter("nom");
if (nom == null || nom.isEmpty()) {
    nom = "DÃ©faut";
}

// Integer avec gestion d'erreur
int age = 18; // dÃ©faut
String ageParam = req.getParameter("age");
if (ageParam != null && !ageParam.isEmpty()) {
    try {
        age = Integer.parseInt(ageParam);
    } catch (NumberFormatException e) {
        age = 18;
    }
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 15. MESSAGES STYLÃ‰S                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Erreur (rouge)
out.println("<div class='error'><p>Message d'erreur</p></div>");

// SuccÃ¨s (vert)
out.println("<div class='success'><p>OpÃ©ration rÃ©ussie !</p></div>");

// Info (bleu)
out.println("<div class='info'><p>Information</p></div>");

// Warning (jaune)
out.println("<div class='warning'><p>Attention !</p></div>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 16. MENU NAVIGATION                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<nav>");
out.println("  <a href='servlet-Liste'>Liste</a>");
out.println("  <a href='servlet-Ajouter'>Ajouter</a>");
out.println("  <a href='servlet-Deconnexion'>DÃ©connexion</a>");
out.println("</nav>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 17. COOKIES                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// CrÃ©er
Cookie c = new Cookie("nom", "valeur");
c.setMaxAge(3600); // 1h
res.addCookie(c);

// Lire
String val = null;
Cookie[] cookies = req.getCookies();
if (cookies != null) {
    for (Cookie cookie : cookies) {
        if ("nom".equals(cookie.getName())) {
            val = cookie.getValue();
        }
    }
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 18. LISTE DÃ‰ROULANTE (SELECT) DEPUIS BDD                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String sql = "SELECT id, nom FROM equipe ORDER BY nom";
try (Statement stmt = cnx.createStatement();
     ResultSet rs = stmt.executeQuery(sql)) {
    
    out.println("<select name='equipe'>");
    out.println("  <option value=''>-- Choisir --</option>");
    while (rs.next()) {
        out.println("  <option value='" + rs.getInt("id") + "'>" + rs.getString("nom") + "</option>");
    }
    out.println("</select>");
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 19. COMPTER (COUNT)                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String sql = "SELECT COUNT(*) as total FROM client";
try (Statement stmt = cnx.createStatement();
     ResultSet rs = stmt.executeQuery(sql)) {
    if (rs.next()) {
        int total = rs.getInt("total");
        out.println("<p>Total : " + total + " client(s)</p>");
    }
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 20. TRANSACTION                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Connection cnx = null;
try {
    cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass);
    cnx.setAutoCommit(false);
    
    // Plusieurs requÃªtes
    PreparedStatement pstmt1 = cnx.prepareStatement("INSERT INTO ...");
    pstmt1.executeUpdate();
    pstmt1.close();
    
    PreparedStatement pstmt2 = cnx.prepareStatement("UPDATE ...");
    pstmt2.executeUpdate();
    pstmt2.close();
    
    cnx.commit();
    out.println("<p>Transaction OK</p>");
} catch (SQLException e) {
    if (cnx != null) cnx.rollback();
    out.println("<p>Erreur : " + e.getMessage() + "</p>");
} finally {
    if (cnx != null) cnx.close();
}



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 21. BATCH INSERT (insÃ©rer plusieurs lignes d'un coup)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "INSERT INTO client (nom, prenom, age) VALUES (?, ?, ?)";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        
        // Ajouter plusieurs lignes au batch
        pstmt.setString(1, "Dupont");
        pstmt.setString(2, "Jean");
        pstmt.setInt(3, 25);
        pstmt.addBatch();
        
        pstmt.setString(1, "Martin");
        pstmt.setString(2, "Marie");
        pstmt.setInt(3, 30);
        pstmt.addBatch();
        
        pstmt.setString(1, "Durand");
        pstmt.setString(2, "Paul");
        pstmt.setInt(3, 35);
        pstmt.addBatch();
        
        // ExÃ©cuter tout d'un coup
        int[] results = pstmt.executeBatch();
        out.println("<p>" + results.length + " lignes insÃ©rÃ©es</p>");
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 22. FORMULAIRE DE MODIFICATION PRÃ‰-REMPLI                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// D'abord rÃ©cupÃ©rer les donnÃ©es existantes
int id = Integer.parseInt(req.getParameter("id"));
String nom = "", prenom = "";
int age = 0;

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    String sql = "SELECT nom, prenom, age FROM client WHERE id = ?";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setInt(1, id);
        try (ResultSet rs = pstmt.executeQuery()) {
            if (rs.next()) {
                nom = rs.getString("nom");
                prenom = rs.getString("prenom");
                age = rs.getInt("age");
            }
        }
    }
}

// Afficher le formulaire prÃ©-rempli
out.println("<form method='POST' action='servlet-ModifierPost'>");
out.println("  <input type='hidden' name='id' value='" + id + "'>");
out.println("  <label>Nom :</label>");
out.println("  <input type='text' name='nom' value='" + nom + "' required>");
out.println("  <label>PrÃ©nom :</label>");
out.println("  <input type='text' name='prenom' value='" + prenom + "' required>");
out.println("  <label>Age :</label>");
out.println("  <input type='number' name='age' value='" + age + "' required>");
out.println("  <input type='submit' value='Modifier'>");
out.println("</form>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 23. RADIO BUTTONS                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Afficher des radio buttons
out.println("<label>Sexe :</label>");
out.println("<input type='radio' id='homme' name='sexe' value='H' checked>");
out.println("<label for='homme'>Homme</label>");
out.println("<input type='radio' id='femme' name='sexe' value='F'>");
out.println("<label for='femme'>Femme</label>");

// RÃ©cupÃ©rer la valeur
String sexe = req.getParameter("sexe"); // "H" ou "F"


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 24. CHECKBOXES                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Afficher des checkboxes
out.println("<label>Langages :</label>");
out.println("<input type='checkbox' id='java' name='langages' value='Java'>");
out.println("<label for='java'>Java</label>");
out.println("<input type='checkbox' id='python' name='langages' value='Python'>");
out.println("<label for='python'>Python</label>");
out.println("<input type='checkbox' id='js' name='langages' value='JavaScript'>");
out.println("<label for='js'>JavaScript</label>");

// RÃ©cupÃ©rer les valeurs cochÃ©es
String[] langages = req.getParameterValues("langages");
if (langages != null) {
    for (String lang : langages) {
        out.println("<p>CochÃ© : " + lang + "</p>");
    }
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 25. NIVEAU D'ISOLATION TRANSACTION                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    
    // DÃ©finir le niveau d'isolation
    cnx.setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE);
    // Autres niveaux possibles :
    // Connection.TRANSACTION_READ_UNCOMMITTED
    // Connection.TRANSACTION_READ_COMMITTED
    // Connection.TRANSACTION_REPEATABLE_READ
    
    cnx.setAutoCommit(false);
    
    // Tes requÃªtes ici...
    
    cnx.commit();
} catch (SQLException e) {
    cnx.rollback();
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 26. CRÃ‰ER NOUVEL UTILISATEUR (avec MD5)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String login = req.getParameter("login");
String mdp = req.getParameter("mdp");
String question = req.getParameter("question");
String reponse = req.getParameter("reponse");

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    
    // VÃ©rifier si le login existe dÃ©jÃ 
    String checkSql = "SELECT login FROM personne WHERE login = ?";
    try (PreparedStatement checkStmt = cnx.prepareStatement(checkSql)) {
        checkStmt.setString(1, login);
        try (ResultSet rs = checkStmt.executeQuery()) {
            if (rs.next()) {
                out.println("<div class='error'><p>Ce login existe dÃ©jÃ  !</p></div>");
                return;
            }
        }
    }
    
    // InsÃ©rer le nouvel utilisateur avec mot de passe hachÃ©
    String sql = "INSERT INTO personne (login, mdp, role, question, reponse) VALUES (?, MD5(?), 'util', ?, ?)";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setString(1, login);
        pstmt.setString(2, mdp);
        pstmt.setString(3, question);
        pstmt.setString(4, reponse);
        
        int rows = pstmt.executeUpdate();
        if (rows > 0) {
            out.println("<div class='success'><p>Compte crÃ©Ã© avec succÃ¨s !</p></div>");
        }
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 27. RÃ‰CUPÃ‰RATION MOT DE PASSE (question magique)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String login = req.getParameter("login");
String reponse = req.getParameter("reponse");

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    
    String sql = "SELECT mdp FROM personne WHERE login = ? AND reponse = ?";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setString(1, login);
        pstmt.setString(2, reponse);
        
        try (ResultSet rs = pstmt.executeQuery()) {
            if (rs.next()) {
                String mdpHache = rs.getString("mdp");
                out.println("<div class='info'><p>Votre mot de passe hachÃ© : " + mdpHache + "</p>");
                out.println("<p><em>(Note: le mot de passe est hachÃ©, il n'est plus utilisable)</em></p></div>");
            } else {
                out.println("<div class='error'><p>Login ou rÃ©ponse incorrecte !</p></div>");
            }
        }
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 28. AFFICHER LA QUESTION MAGIQUE                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

String login = req.getParameter("login");

try (Connection cnx = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass)) {
    
    String sql = "SELECT question FROM personne WHERE login = ?";
    try (PreparedStatement pstmt = cnx.prepareStatement(sql)) {
        pstmt.setString(1, login);
        
        try (ResultSet rs = pstmt.executeQuery()) {
            if (rs.next()) {
                String question = rs.getString("question");
                
                out.println("<form method='POST' action='servlet-RecupererMdp'>");
                out.println("  <input type='hidden' name='login' value='" + login + "'>");
                out.println("  <p><strong>Question :</strong> " + question + "</p>");
                out.println("  <label>RÃ©ponse :</label>");
                out.println("  <input type='text' name='reponse' required>");
                out.println("  <input type='submit' value='RÃ©cupÃ©rer'>");
                out.println("</form>");
            } else {
                out.println("<div class='error'><p>Login inconnu !</p></div>");
            }
        }
    }
} catch (SQLException e) {
    out.println("<div class='error'><p>" + e.getMessage() + "</p></div>");
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 29. BOOTSTRAP - EN-TÃŠTE HTML                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<!DOCTYPE html>");
out.println("<html lang='fr'>");
out.println("<head>");
out.println("  <meta charset='UTF-8'>");
out.println("  <meta name='viewport' content='width=device-width, initial-scale=1'>");
out.println("  <title>Mon Titre</title>");
out.println("  <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css' rel='stylesheet'>");
out.println("</head>");
out.println("<body>");
out.println("<div class='container'>");
out.println("  <h1 class='mt-4'>Mon Titre</h1>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 30. BOOTSTRAP - MESSAGES D'ALERTE                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Alerte primaire (bleu)
out.println("<div class='alert alert-primary' role='alert'>Message d'information</div>");

// Alerte succÃ¨s (vert)
out.println("<div class='alert alert-success' role='alert'>OpÃ©ration rÃ©ussie !</div>");

// Alerte danger (rouge)
out.println("<div class='alert alert-danger' role='alert'>Erreur !</div>");

// Alerte warning (jaune)
out.println("<div class='alert alert-warning' role='alert'>Attention !</div>");

// Alerte info (bleu clair)
out.println("<div class='alert alert-info' role='alert'>Information</div>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 31. BOOTSTRAP - TABLEAU                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<table class='table table-striped table-hover'>");
out.println("  <thead class='table-dark'>");
out.println("    <tr><th>Nom</th><th>PrÃ©nom</th><th>Age</th></tr>");
out.println("  </thead>");
out.println("  <tbody>");
while (rs.next()) {
    out.println("<tr>");
    out.println("  <td>" + rs.getString("nom") + "</td>");
    out.println("  <td>" + rs.getString("prenom") + "</td>");
    out.println("  <td>" + rs.getInt("age") + "</td>");
    out.println("</tr>");
}
out.println("  </tbody>");
out.println("</table>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 32. BOOTSTRAP - FORMULAIRE                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<form method='POST' action='servlet-Ajouter'>");

out.println("  <div class='mb-3'>");
out.println("    <label for='nom' class='form-label'>Nom</label>");
out.println("    <input type='text' class='form-control' id='nom' name='nom' required>");
out.println("  </div>");

out.println("  <div class='mb-3'>");
out.println("    <label for='prenom' class='form-label'>PrÃ©nom</label>");
out.println("    <input type='text' class='form-control' id='prenom' name='prenom' required>");
out.println("  </div>");

out.println("  <div class='mb-3'>");
out.println("    <label for='age' class='form-label'>Age</label>");
out.println("    <input type='number' class='form-control' id='age' name='age' required>");
out.println("  </div>");

out.println("  <button type='submit' class='btn btn-primary'>Envoyer</button>");
out.println("</form>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 33. BOOTSTRAP - BOUTONS                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Boutons colorÃ©s
out.println("<button class='btn btn-primary'>Primaire</button>");
out.println("<button class='btn btn-success'>SuccÃ¨s</button>");
out.println("<button class='btn btn-danger'>Danger</button>");
out.println("<button class='btn btn-warning'>Warning</button>");
out.println("<button class='btn btn-info'>Info</button>");

// Boutons avec liens
out.println("<a href='servlet-Liste' class='btn btn-primary'>Voir la liste</a>");
out.println("<a href='servlet-Ajouter' class='btn btn-success'>Ajouter</a>");


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 34. BOOTSTRAP - BARRE DE NAVIGATION                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

out.println("<nav class='navbar navbar-expand-lg navbar-dark bg-dark'>");
out.println("  <div class='container-fluid'>");
out.println("    <a class='navbar-brand' href='#'>Mon Site</a>");
out.println("    <div class='navbar-nav'>");
out.println("      <a class='nav-link' href='servlet-Liste'>Liste</a>");
out.println("      <a class='nav-link' href='servlet-Ajouter'>Ajouter</a>");
out.println("      <a class='nav-link' href='servlet-Deconnexion'>DÃ©connexion</a>");
out.println("    </div>");
out.println("  </div>");
out.println("</nav>");


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ RAPPELS IMPORTANTS (DEMANDÃ‰S PAR LE PROF !)

âœ“ TOUJOURS : res.setContentType("text/html;charset=UTF-8");
âœ“ TOUJOURS : try-with-resources pour Connection/Statement/ResultSet (fermeture auto)
âœ“ TOUJOURS : PreparedStatement pour les paramÃ¨tres (Ã©vite SQL injection)
âœ“ TOUJOURS : Afficher e.getMessage() dans les catch (JAMAIS de catch vide !)
âœ“ TOUJOURS : System.out.println() pour debug SQL avant exÃ©cution
âœ“ CSS automatique avec : <link rel='stylesheet' href='style-tp.css'>

ğŸ“Š STRATÃ‰GIE NOTATION :
- Ne fais pas la derniÃ¨re question â†’ 18/20 âœ…
- Ne fais pas les 2 derniÃ¨res â†’ 15/20 âœ…
â†’ PrivilÃ©gie la QUALITÃ‰ sur la vitesse !

Bon courage ! ğŸ’ª
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
